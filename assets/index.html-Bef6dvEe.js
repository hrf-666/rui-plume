import{_ as t,c as s,b as a,o as r}from"./app-BxaswAnj.js";const i="/rui-plume/assets/48.%E9%9B%86%E7%BE%A4%E5%8F%96%E5%80%BC%E5%A4%B1%E8%B4%A5-DscRYYdZ.jpg",p="/rui-plume/assets/49.%E9%9B%86%E7%BE%A4%E9%80%9A%E9%85%8D%E7%AC%A6%E8%8E%B7%E5%8F%96-BEdK7hbX.jpg",c="/rui-plume/assets/50.crc16%E6%BA%90%E7%A0%81%E6%B5%85%E8%B0%88-DhJTfmbW.jpg",l="/rui-plume/assets/51.%E9%9B%86%E7%BE%A4%E6%98%AF%E5%90%A6%E5%AE%8C%E6%95%B4%E6%89%8D%E8%83%BD%E5%AF%B9%E5%A4%96%E6%8F%90%E4%BE%9B%E6%9C%8D%E5%8A%A1.-B6nz0iso.jpg",n={};function o(d,e){return r(),s("div",null,[...e[0]||(e[0]=[a('<h1 id="集群常用操作命令和crc16算法分析" tabindex="-1"><a class="header-anchor" href="#集群常用操作命令和crc16算法分析"><span>集群常用操作命令和CRC16算法分析</span></a></h1><h3 id="不在同一个slot槽位下的多键操作支持不好-通识占位符登场" tabindex="-1"><a class="header-anchor" href="#不在同一个slot槽位下的多键操作支持不好-通识占位符登场"><span>不在同一个slot槽位下的多键操作支持不好，通识占位符登场</span></a></h3><p><img src="'+i+'" alt=""></p><p>不在同一个slot槽位下的键值无法使用mset、mget等多键操作</p><p>可以通过{}来定义同一个组的概念，使key中{}内相同内容的键值对放到一个slot槽位去，对照下图类似k1k2k3都映射为x，自然槽位一样</p><p><img src="'+p+'" alt=""></p><h3 id="redis集群有16384个哈希槽-每个key通过crc16校验后对16384取模来决定放置哪个槽。集群的每个节点负责一部分hash槽。" tabindex="-1"><a class="header-anchor" href="#redis集群有16384个哈希槽-每个key通过crc16校验后对16384取模来决定放置哪个槽。集群的每个节点负责一部分hash槽。"><span>Redis集群有16384个哈希槽，每个key通过CRC16校验后对16384取模来决定放置哪个槽。集群的每个节点负责一部分hash槽。</span></a></h3><p><strong>CRC16源码浅谈</strong></p><p>cluster.c源码分析一下</p><p><img src="'+c+'" alt=""></p><h3 id="常用命令" tabindex="-1"><a class="header-anchor" href="#常用命令"><span>常用命令</span></a></h3><ul><li><p>集群是否完整才能对外提供服务</p><p><img src="'+l+'" alt=""></p><table><thead><tr><th>默认YES，现在集群架构是3主3从的redis cluster由3个master平分16384个slot，每个master的小集群负责1/3的slot，对应一部分数据。cluster-require-full-coverage:默认值yes，即需要集群完整性，方可对外提供服务通常情况，如果这3个小集群中，任何一个(1主1从）挂了，你这个集群对外可提供的数据只有2/3了，整个集群是不完整的， redis默认在这种情况下，是不会对外提供服务的。</th></tr></thead><tbody><tr><td>如果你的诉求是，集群不完整的话也需要对外提供服务，需要将该参数设置为no，这样的话你挂了的那个小集群是不行了，但是其他的小集群仍然可以对外提供服务。</td></tr></tbody></table><p>cluster-require-full-coverage</p></li><li><p>CLUSTER COUNTKEYSINSLOT 槽位数字编号</p><p>CLUSTER COUNTKEYSINSLOT 12706</p><p>返回结果：</p><p>​ 1 该槽位被占用</p><p>​ 0 该槽位没有被占用</p></li><li><p>CLUSTER KEYSLOT 键名称</p><p>CLUSTER KEYSLOT k1</p><p>返回对应key的槽位数据，key不存在则返回0</p></li></ul>',12)])])}const m=t(n,[["render",o]]),h=JSON.parse('{"path":"/article/hgbnf4kl/","title":"9.集群常用操作命令和CRC16算法分析","lang":"zh-CN","frontmatter":{"title":"9.集群常用操作命令和CRC16算法分析","createTime":"2025/08/25 22:29:43","permalink":"/article/hgbnf4kl/","watermark":true},"readingTime":{"minutes":1.72,"words":516},"git":{"createdTime":1756136329000,"updatedTime":1756136329000,"contributors":[{"name":"HRF","username":"HRF","email":"3398775460@qq.com","commits":1,"avatar":"https://avatars.githubusercontent.com/HRF?v=4","url":"https://github.com/HRF"}]},"filePathRelative":"study-notes/back-end/redis/10.Redis集群(cluster)/9.集群常用操作命令和CRC16算法分析.md","headers":[],"categoryList":[{"id":"3c4c90","sort":10002,"name":"study-notes"},{"id":"fe643d","sort":10003,"name":"back-end"},{"id":"46b09b","sort":10033,"name":"redis"},{"id":"9fbdec","sort":10,"name":"Redis集群(cluster)"}]}');export{m as comp,h as data};

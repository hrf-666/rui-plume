import{_ as e,c as r,b as i,o as a}from"./app-BxaswAnj.js";const t="/rui-plume/assets/19.RDB%E5%BF%AB%E7%85%A7%E7%A6%81%E7%94%A8-Bh6NBshl.jpg",p="/rui-plume/assets/20.stop-writes-on-bgsave-error-LDNNW3cS.jpg",d="/rui-plume/assets/21.rdbcompression-BNNNBhGf.jpg",l="/rui-plume/assets/22.rdbchecksum-DxT7lV6I.jpg",n="/rui-plume/assets/23.rdb-del-sync-files-BxLsa0c5.jpg",o="/rui-plume/assets/24.RDB%E5%B0%8F%E6%80%BB%E7%BB%93-BoN0QVyq.jpg",c={};function m(h,s){return a(),r("div",null,[...s[0]||(s[0]=[i('<h1 id="rdb快照文件-md" tabindex="-1"><a class="header-anchor" href="#rdb快照文件-md"><span>RDB快照文件.md</span></a></h1><h3 id="如何检查修复dump-rdb文件" tabindex="-1"><a class="header-anchor" href="#如何检查修复dump-rdb文件"><span>如何检查修复dump.rdb文件？</span></a></h3><p>进入到redis安装目录，执行redis-check-rdb命令 redis-check-rdb ./redisconfig/dump.rdb</p><h3 id="哪些情况会触发rdb快照" tabindex="-1"><a class="header-anchor" href="#哪些情况会触发rdb快照"><span>哪些情况会触发RDB快照</span></a></h3><ol><li>配置文件中默认的快照配置</li><li>手动save/bgsave命令</li><li>执行flushdb/fulshall命令也会产生dump.rdb文件，但是也会将命令记录到dump.rdb文件中，恢复后依旧是空，无意义</li><li>执行shutdown且没有设置开启AOF持久化</li><li>主从复制时，主节点自动触发</li></ol><h3 id="如何禁用快照" tabindex="-1"><a class="header-anchor" href="#如何禁用快照"><span>如何禁用快照</span></a></h3><ol><li>动态所有停止RDB保存规则的方法：redis-cli config set value &quot;&quot;</li><li>手动修改配置文件</li></ol><p><img src="'+t+'" alt=""></p><h3 id="rdb优化配置项详解" tabindex="-1"><a class="header-anchor" href="#rdb优化配置项详解"><span>RDB优化配置项详解</span></a></h3><p>配置文件SNAPSHOTTING模块</p><ul><li><p>save &lt;seconds&gt; &lt;changes&gt;：配置快照保存条件</p></li><li><p>dir：配置快照保存目录地址</p></li><li><p>dbfilename：配置快照的文件名</p></li><li><p>stop-writes-on-bgsave-error：</p><p><img src="'+p+'" alt=""></p><p>默认yes，如果配置成no，表示不在乎数据不一致或者有其他的手段发现和控制这种不一致，那么在快照写入失败时，也能确保redis继续接受新的请求</p></li><li><p>rdbcompression：</p><p><img src="'+d+'" alt=""></p><p>默认yes，对于存储到磁盘中的快照，可以设置是否进行压缩存储。如果是的话，Redis会采用LZF算法进行压缩。如果你不想消耗CPU来进行压缩的话，可以设置为关闭此功能</p></li><li><p>rdbchecksum：</p><p><img src="'+l+'" alt=""></p><p>默认yes，在存储快照后，还可以让redis使用CRC64算法来进行数据校验，但是这样做会增加大约10%的性能消耗，如果希望获取到最大的性能提升，可以关闭此功能</p></li><li><p>rdb-del-sync-files：</p></li></ul><p><img src="'+n+'" alt=""></p><p>在没有持久化的情况下删除复制中使用的RDB文件。默认情况下no，此选项是禁用的。</p><p>小总结：</p><p><img src="'+o+'" alt=""></p>',15)])])}const b=e(c,[["render",m]]),g=JSON.parse('{"path":"/article/8qkppm3r/","title":"5.RDB快照文件","lang":"zh-CN","frontmatter":{"title":"5.RDB快照文件","createTime":"2025/08/25 22:29:41","permalink":"/article/8qkppm3r/","watermark":true},"readingTime":{"minutes":1.61,"words":482},"git":{"createdTime":1756136329000,"updatedTime":1756136329000,"contributors":[{"name":"HRF","username":"HRF","email":"3398775460@qq.com","commits":1,"avatar":"https://avatars.githubusercontent.com/HRF?v=4","url":"https://github.com/HRF"}]},"filePathRelative":"study-notes/back-end/redis/4.Redis持久化/5.RDB快照文件.md","headers":[],"categoryList":[{"id":"3c4c90","sort":10002,"name":"study-notes"},{"id":"fe643d","sort":10003,"name":"back-end"},{"id":"46b09b","sort":10033,"name":"redis"},{"id":"3bae55","sort":4,"name":"Redis持久化"}]}');export{b as comp,g as data};

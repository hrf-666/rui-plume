import{_ as e,c as a,b as n,o as i}from"./app-BxaswAnj.js";const r="/rui-plume/assets/17.%E5%90%AF%E5%8A%A83%E4%B8%BB3%E4%BB%8E-C-zoESRm.jpg",t="/rui-plume/assets/18.3%E4%B8%BB3%E4%BB%8E-GlJTaVtc.jpg",l="/rui-plume/assets/19.%E9%9B%86%E7%BE%A4%E8%8A%82%E7%82%B9%E7%8A%B6%E6%80%81-DD4gu0Zb.jpg",p="/rui-plume/assets/20.%E9%9B%86%E7%BE%A4%E8%8A%82%E7%82%B9%E7%8A%B6%E6%80%81%E6%9F%A5%E7%9C%8B-B6E8Tzf8.jpg",d={};function c(m,s){return i(),a("div",null,[...s[0]||(s[0]=[n(`<h1 id="_3主3从redis集群配置" tabindex="-1"><a class="header-anchor" href="#_3主3从redis集群配置"><span>3主3从Redis集群配置</span></a></h1><h3 id="找3台真实虚拟机-各自新建" tabindex="-1"><a class="header-anchor" href="#找3台真实虚拟机-各自新建"><span>找3台真实虚拟机，各自新建</span></a></h3><p>mkdir -p /myredis/cluster</p><h3 id="新建6个独立的redis实例服务" tabindex="-1"><a class="header-anchor" href="#新建6个独立的redis实例服务"><span>新建6个独立的Redis实例服务</span></a></h3><p>IP： 192.168.0.100 + 端口6381/6382</p><p>​ vim /myredis/cluster/redisCluster6381.conf</p><div class="language-conf line-numbers-mode" data-highlighter="shiki" data-ext="conf" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-conf"><span class="line"><span>bind 0.0.0.0</span></span>
<span class="line"><span>daemonize yes</span></span>
<span class="line"><span>protected-mode no</span></span>
<span class="line"><span>port 6381</span></span>
<span class="line"><span>logfile &quot;/myredis/cluster/cluster6381.log&quot;</span></span>
<span class="line"><span>pidfile /myredis/cluster6381.pid</span></span>
<span class="line"><span>dir /myredis/cluster</span></span>
<span class="line"><span>dbfilename dump6381.rdb</span></span>
<span class="line"><span>appendonly yes</span></span>
<span class="line"><span>appendfilename &quot;appendonly6381.aof&quot;</span></span>
<span class="line"><span>requirepass 123456</span></span>
<span class="line"><span>masterauth 123456</span></span>
<span class="line"><span></span></span>
<span class="line"><span>cluster-enabled yes</span></span>
<span class="line"><span>cluster-config-file nodes-6381.conf</span></span>
<span class="line"><span>cluster-node-timeout 5000</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>​ vim /myredis/cluster/redisCluster6382.conf</p><p>IP：192.168.0.100 + 端口6383/6384</p><p>​ vim /myredis/cluster/redisCluster6383.conf</p><p>​ vim /myredis/cluster/redisCluster6384.conf</p><p>IP：192.168.0.100 + 端口6385/6386</p><p>​ vim /myredis/cluster/redisCluster6385.conf</p><p>​ vim /myredis/cluster/redisCluster6386.conf</p><p>启动6台主机实例</p><p>​ redis-server /myredis/cluster/redisCluster6381.conf</p><p>​ ...</p><p>​ redis-server /myredis/cluster/redisCluster6386.conf</p><h3 id="通过redis-cli-命令为6台机器构建集群关系" tabindex="-1"><a class="header-anchor" href="#通过redis-cli-命令为6台机器构建集群关系"><span>通过redis-cli 命令为6台机器构建集群关系</span></a></h3><p><strong>构建主从关系命令</strong></p><div class="language-conf line-numbers-mode" data-highlighter="shiki" data-ext="conf" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-conf"><span class="line"><span>// 一定要注意，此处要修改自己的IP为真实IP</span></span>
<span class="line"><span>redis-cli -a 123456 --cluster create --cluster-replicas 1 192.168.111.175:6381 192.168.111.175:6382 192:168.111.172:6383 192.168.111.172:6384 192.168.111.174:6385 192.168.111.174:6386</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>--cluster- replicas 1 表示为每个master创建一一个slave节点</p><p><img src="`+r+'" alt=""></p><p><strong>一切OK的话，3主3从搞定</strong></p><p><img src="'+t+'" alt=""></p><h3 id="_6381作为切入点-查看并检验集群状态" tabindex="-1"><a class="header-anchor" href="#_6381作为切入点-查看并检验集群状态"><span>6381作为切入点，查看并检验集群状态</span></a></h3><p><strong>连接进6381作为切入点，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathcolor="red"><mstyle mathsize="1.2em"><mtext>查看节点状态</mtext></mstyle></mstyle></mrow><annotation encoding="application/x-tex">\\textcolor{red}{\\large 查看节点状态}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.82em;"></span><span class="mord cjk_fallback sizing reset-size6 size7" style="color:red;">查看节点状态</span></span></span></span></strong></p><p><img src="'+l+'" alt=""></p><p><strong>cluster nodes</strong></p><p><img src="'+p+'" alt=""></p><p><strong>CLUSTER INFO</strong></p><p>![](images/21.cluster info.jpg)</p>',32)])])}const u=e(d,[["render",c]]),h=JSON.parse('{"path":"/article/h94otb61/","title":"4.3主3从Redis集群配置","lang":"zh-CN","frontmatter":{"title":"4.3主3从Redis集群配置","createTime":"2025/08/25 22:29:43","permalink":"/article/h94otb61/","watermark":true},"readingTime":{"minutes":0.99,"words":298},"git":{"createdTime":1756136329000,"updatedTime":1756136329000,"contributors":[{"name":"HRF","username":"HRF","email":"3398775460@qq.com","commits":1,"avatar":"https://avatars.githubusercontent.com/HRF?v=4","url":"https://github.com/HRF"}]},"filePathRelative":"study-notes/back-end/redis/10.Redis集群(cluster)/4.3主3从Redis集群配置.md","headers":[],"categoryList":[{"id":"3c4c90","sort":10002,"name":"study-notes"},{"id":"fe643d","sort":10003,"name":"back-end"},{"id":"46b09b","sort":10033,"name":"redis"},{"id":"9fbdec","sort":10,"name":"Redis集群(cluster)"}]}');export{u as comp,h as data};
